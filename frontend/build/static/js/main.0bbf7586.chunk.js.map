{"version":3,"sources":["components/Header.jsx","misc/pieces.js","components/GameCanvas.jsx","components/Game.jsx","App.js","serviceWorker.js","index.js"],"names":["Header","props","console","log","pieces","drawBlock","context","x","y","colour","strokeColour","fillStyle","fillRect","strokeStyle","strokeRect","Piece","grid","piece","this","active","draw","row","length","col","clear","lock","coords","rotate","isCollition","moveLeft","moveRight","moveDown","newX","newY","newState","Grid","colums","rows","backgroundColour","init","r","c","penalty","currentPiece","removeFull","newPiece","pieceNum","Math","floor","random","pieceVariant","pieceNumber","pieceStartPosition","GameCanvas","canvasRef","useRef","useState","setContext","setGrid","setCurrentPiece","useEffect","current","renderCtx","getContext","gr","handleKeyPress","key","controls","document","addEventListener","removeEventListener","seconds","setSeconds","interval","setInterval","clearInterval","style","textAlign","id","ref","width","COLS","height","ROWS","border","marginTop","Game","App","CssBaseline","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.0bbf7586.chunk.js","sourcesContent":["import React from \"react\"\n\nconst Header = (props) => {\n\tconsole.log(props)\n\treturn <>\"Header here. Hallo\"</>\n}\n\nexport default Header\n","const Z = [\n\t[\n\t\t[1, 1, 0],\n\t\t[0, 1, 1],\n\t\t[0, 0, 0],\n\t],\n\t[\n\t\t[0, 0, 1],\n\t\t[0, 1, 1],\n\t\t[0, 1, 0],\n\t],\n\t[\n\t\t[1, 1, 0],\n\t\t[0, 1, 1],\n\t\t[0, 0, 0],\n\t],\n\t[\n\t\t[0, 0, 1],\n\t\t[0, 1, 1],\n\t\t[0, 1, 0],\n\t],\n]\n\nconst S = [\n\t[\n\t\t[0, 1, 1],\n\t\t[1, 1, 0],\n\t\t[0, 0, 0],\n\t],\n\t[\n\t\t[1, 0, 0],\n\t\t[1, 1, 0],\n\t\t[0, 1, 0],\n\t],\n\t[\n\t\t[0, 1, 1],\n\t\t[1, 1, 0],\n\t\t[0, 0, 0],\n\t],\n\t[\n\t\t[1, 0, 0],\n\t\t[1, 1, 0],\n\t\t[0, 1, 0],\n\t],\n]\n\nconst T = [\n\t[\n\t\t[0, 1, 0],\n\t\t[0, 1, 1],\n\t\t[0, 1, 0],\n\t],\n\t[\n\t\t[0, 0, 0],\n\t\t[1, 1, 1],\n\t\t[0, 1, 0],\n\t],\n\t[\n\t\t[0, 1, 0],\n\t\t[1, 1, 0],\n\t\t[0, 1, 0],\n\t],\n\t[\n\t\t[0, 1, 0],\n\t\t[1, 1, 1],\n\t\t[0, 0, 0],\n\t],\n]\n\nconst L = [\n\t[\n\t\t[0, 1, 0],\n\t\t[0, 1, 0],\n\t\t[0, 1, 1],\n\t],\n\t[\n\t\t[0, 0, 0],\n\t\t[1, 1, 1],\n\t\t[1, 0, 0],\n\t],\n\t[\n\t\t[1, 1, 0],\n\t\t[0, 1, 0],\n\t\t[0, 1, 0],\n\t],\n\t[\n\t\t[0, 0, 1],\n\t\t[1, 1, 1],\n\t\t[0, 0, 0],\n\t],\n]\n\nconst J = [\n\t[\n\t\t[0, 1, 0],\n\t\t[0, 1, 0],\n\t\t[1, 1, 0],\n\t],\n\t[\n\t\t[1, 0, 0],\n\t\t[1, 1, 1],\n\t\t[0, 0, 0],\n\t],\n\t[\n\t\t[0, 1, 1],\n\t\t[0, 1, 0],\n\t\t[0, 1, 0],\n\t],\n\t[\n\t\t[0, 0, 0],\n\t\t[1, 1, 1],\n\t\t[0, 0, 1],\n\t],\n]\n\nconst O = [\n\t[\n\t\t[1, 1, 0],\n\t\t[1, 1, 0],\n\t\t[0, 0, 0],\n\t],\n\t[\n\t\t[1, 1, 0],\n\t\t[1, 1, 0],\n\t\t[0, 0, 0],\n\t],\n\t[\n\t\t[1, 1, 0],\n\t\t[1, 1, 0],\n\t\t[0, 0, 0],\n\t],\n\t[\n\t\t[1, 1, 0],\n\t\t[1, 1, 0],\n\t\t[0, 0, 0],\n\t],\n]\n\nconst I = [\n\t[\n\t\t[0, 1, 0, 0],\n\t\t[0, 1, 0, 0],\n\t\t[0, 1, 0, 0],\n\t\t[0, 1, 0, 0],\n\t],\n\t[\n\t\t[0, 0, 0, 0],\n\t\t[1, 1, 1, 1],\n\t\t[0, 0, 0, 0],\n\t\t[0, 0, 0, 0],\n\t],\n\t[\n\t\t[0, 1, 0, 0],\n\t\t[0, 1, 0, 0],\n\t\t[0, 1, 0, 0],\n\t\t[0, 1, 0, 0],\n\t],\n\t[\n\t\t[0, 0, 0, 0],\n\t\t[1, 1, 1, 1],\n\t\t[0, 0, 0, 0],\n\t\t[0, 0, 0, 0],\n\t],\n]\n\nconst pieces = [\n\t[L, \"#b69\"],\n\t[T, \"lime\"],\n\t[Z, \"#f6f\"],\n\t[S, \"#69f\"],\n\t[J, \"#7ff\"],\n\t[O, \"#e26\"],\n\t[I, \"#ff8\"],\n]\n\nconst pieceStartPosition = (pieceNumber, pieceVariant) => {\n\tif (pieceNumber === 0 || pieceNumber === 4 || pieceNumber === 2 || pieceNumber === 3) {\n\t\treturn [0, 3]\n\t}\n\tif (pieceNumber === 6) {\n\t\tif (pieceVariant === 0 || pieceVariant === 2) return [0, 3]\n\t\telse return [-1, 3]\n\t}\n\tif (pieceNumber === 1) {\n\t\tif (pieceVariant === 1) return [-1, 3]\n\t\telse if (pieceVariant === 0 || pieceVariant === 3) return [0, 3]\n\t\telse return [0, 4]\n\t}\n\tif (pieceNumber === 5) return [0, 4]\n}\n\nexport { pieces, pieceStartPosition }\n","import React, { useEffect, useState, useRef } from \"react\"\nimport { pieces, pieceStartPosition } from \"../misc/pieces\"\n\n/**********************************\\\n * canvas config data\n\\**********************************/\nconst ROWS = 20\nconst COLS = 10\nconst EMPTY_BG = \"#765\"\nconst BORDER = \"adf\"\nconst BLOCK = 30\n\n/****\n * Canvas drawing functions\n */\nconst drawBlock = (context, x, y, colour = EMPTY_BG, strokeColour = BORDER) => {\n\tcontext.fillStyle = colour\n\tcontext.fillRect(x * BLOCK, y * BLOCK, BLOCK, BLOCK)\n\tcontext.strokeStyle = strokeColour\n\tcontext.strokeRect(x * BLOCK, y * BLOCK, BLOCK, BLOCK)\n}\n\n/***\n * Tetramino Class\n */\n\nfunction Piece(context, grid, piece, colour) {\n\tthis.piece = piece\n\tthis.colour = colour\n\tthis.active = 0\n\tthis.x = 0\n\tthis.y = 0\n\tthis.context = context\n\tthis.grid = grid\n\n\tthis.draw = (active = this.active) => {\n\t\tthis.active = active\n\n\t\tfor (let row = 0; row < this.piece[this.active].length; row++) {\n\t\t\tfor (let col = 0; col < this.piece[this.active][row].length; col++) {\n\t\t\t\tif (this.piece[this.active][row][col]) drawBlock(this.context, this.x + col, this.y + row, this.colour)\n\t\t\t}\n\t\t}\n\t}\n\tthis.clear = (active = this.active) => {\n\t\tthis.active = active\n\n\t\tfor (let row = 0; row < this.piece[this.active].length; row++) {\n\t\t\tfor (let col = 0; col < this.piece[this.active][row].length; col++) {\n\t\t\t\tif (this.piece[this.active][row][col]) drawBlock(this.context, this.x + col, this.y + row, EMPTY_BG)\n\t\t\t}\n\t\t}\n\t}\n\tthis.lock = () => {\n\t\tfor (let row = 0; row < this.piece[this.active].length; row++) {\n\t\t\tfor (let col = 0; col < this.piece[this.active][row].length; col++) {\n\t\t\t\tif (this.piece[this.active][row][col]) grid.coords[this.y + row][this.x + col] = this.colour\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.rotate = () => {\n\t\tif (!this.isCollition(this.x, this.y, (this.active + 1) % 4)) {\n\t\t\tthis.clear()\n\t\t\tthis.active = (1 + this.active) % this.piece.length\n\t\t\tthis.draw()\n\t\t} else if (!this.isCollition(this.x + 1, this.y, (this.active + 1) % 4)) {\n\t\t\tthis.clear()\n\t\t\tthis.x = this.x + 1\n\t\t\tthis.active = (1 + this.active) % this.piece.length\n\t\t\tthis.draw()\n\t\t} else if (!this.isCollition(this.x - 1, this.y, (this.active + 1) % 4)) {\n\t\t\tthis.clear()\n\t\t\tthis.x = this.x - 1\n\n\t\t\tthis.active = (1 + this.active) % this.piece.length\n\t\t\tthis.draw()\n\t\t} else if (!this.isCollition(this.x - 2, this.y, (this.active + 1) % 4)) {\n\t\t\tthis.clear()\n\t\t\tthis.x = this.x - 2\n\n\t\t\tthis.active = (1 + this.active) % this.piece.length\n\t\t\tthis.draw()\n\t\t}\n\t}\n\n\tthis.moveLeft = () => {\n\t\tif (!this.isCollition(this.x - 1)) {\n\t\t\tthis.clear()\n\t\t\tthis.x = this.x - 1\n\t\t\tthis.draw()\n\t\t}\n\t}\n\n\tthis.moveRight = () => {\n\t\tif (!this.isCollition(this.x + 1)) {\n\t\t\tthis.clear()\n\t\t\tthis.x = this.x + 1\n\t\t\tthis.draw()\n\t\t}\n\t}\n\n\tthis.moveDown = () => {\n\t\tif (!this.isCollition(this.x, this.y + 1)) {\n\t\t\tthis.clear()\n\t\t\tthis.y = this.y + 1\n\t\t\tthis.draw()\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tthis.isCollition = (newX = this.x, newY = this.y, newState = this.active) => {\n\t\tfor (let row = 0; row < this.piece[newState].length; row++) {\n\t\t\tfor (let col = 0; col < this.piece[newState][row].length; col++) {\n\t\t\t\tif (this.piece[newState][row][col]) {\n\t\t\t\t\tif (newX + col < 0 || newX + col >= COLS || newY + row >= ROWS) {\n\t\t\t\t\t\tconsole.log(\"collision\")\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t\tif (this.grid.coords[newY + row][newX + col] !== EMPTY_BG) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n}\n\n/**\n * Grid class\n */\n\nfunction Grid(context, colums = COLS, rows = ROWS, backgroundColour = EMPTY_BG) {\n\tthis.colums = colums\n\tthis.rows = rows\n\tthis.colour = backgroundColour\n\tthis.coords = []\n\n\tthis.init = () => {\n\t\tfor (let row = 0; row < this.rows; row++) {\n\t\t\tthis.coords[row] = []\n\t\t\tfor (let col = 0; col < this.colums; col++) {\n\t\t\t\tthis.coords[row][col] = EMPTY_BG\n\t\t\t}\n\t\t}\n\t\tthis.draw()\n\t}\n\n\tthis.draw = () => {\n\t\tlet r = 0\n\t\tlet c = 0\n\t\twhile (this.coords[r]) {\n\t\t\tc = 0\n\t\t\twhile (this.coords[r][c]) {\n\t\t\t\tdrawBlock(context, c, r, this.coords[r][c])\n\t\t\t\tc++\n\t\t\t}\n\t\t\tr++\n\t\t}\n\t}\n\n\tthis.penalty = (currentPiece) => {\n\t\tlet y = 0\n\t\twhile (this.coords[y + 1]) {\n\t\t\tthis.coords[y] = this.coords[y + 1]\n\t\t\ty++\n\t\t}\n\t\tthis.coords[y] = []\n\t\tfor (let c = 0; c < COLS; c++) {\n\t\t\tthis.coords[y][c] = \"red\"\n\t\t}\n\t\tthis.draw()\n\n\t\tif (currentPiece.y - 1 >= 0) currentPiece.y -= 1\n\t\tcurrentPiece.draw()\n\t}\n\n\tthis.removeFull = () => {}\n}\n\n// function penalty(grid, piece) {\n// \tlet y = 0\n// \twhile (grid.coords[y + 1]) {\n// \t\tgrid.coords[y] = grid.coords[y + 1]\n// \t\ty++\n// \t}\n// \tgrid.coords[y] = []\n// \tfor (let c = 0; c < COLS; c++) {\n// \t\tgrid.coords[y][c] = \"red\"\n// \t}\n// \tgrid.draw()\n// \tpiece.y -= 1\n// \tpiece.draw()\n// }\n\nfunction controls(key, piece, grid, context) {\n\tif (key === \"ArrowUp\") piece.rotate()\n\tif (key === \"ArrowLeft\") piece.moveLeft()\n\tif (key === \"ArrowRight\") piece.moveRight()\n\tif (key === \"ArrowDown\") piece.moveDown()\n\tif (key === \"l\") piece.lock()\n\tif (key === \"p\") grid.penalty(piece)\n\tif (key === \"n\") newPiece(context, grid)\n}\n\nfunction newPiece(context, grid) {\n\tif (!context || !grid) return null\n\n\tlet pieceNum = Math.floor(Math.random() * pieces.length)\n\tlet pieceVariant = Math.floor(Math.random() * pieces[pieceNum][0].length)\n\tconsole.log(pieceNum, pieceVariant)\n\tlet newPiece = new Piece(context, grid, pieces[pieceNum][0], pieces[pieceNum][1])\n\n\tnewPiece.active = pieceVariant\n\tlet [y, x] = pieceStartPosition(pieceNum, pieceVariant)\n\tnewPiece.x = x\n\tnewPiece.y = y\n\tnewPiece.draw()\n\treturn newPiece\n}\n\nconst GameCanvas = () => {\n\tconst canvasRef = useRef(null)\n\tconst [context, setContext] = useState(null)\n\tconst [grid, setGrid] = useState(null)\n\tconst [currentPiece, setCurrentPiece] = useState(null)\n\n\tuseEffect(() => {\n\t\tif (canvasRef.current) {\n\t\t\tconst renderCtx = canvasRef.current.getContext(\"2d\")\n\n\t\t\tif (renderCtx) {\n\t\t\t\tsetContext(renderCtx)\n\t\t\t}\n\t\t}\n\t}, [context])\n\n\tuseEffect(() => {\n\t\tif (context) {\n\t\t\tif (!grid) {\n\t\t\t\tlet gr = new Grid(context)\n\t\t\t\tgr.init()\n\t\t\t\tsetGrid(gr)\n\t\t\t} else {\n\t\t\t\tconsole.log(\"grid already exist\")\n\n\t\t\t\tif (!currentPiece) {\n\t\t\t\t\tlet piece = newPiece(context, grid)\n\t\t\t\t\tpiece.draw()\n\t\t\t\t\tsetCurrentPiece(piece)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(\"current piece already set: \", currentPiece)\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * this should be where the drawing magic happens\n\t\t\t\t */\n\t\t\t}\n\t\t}\n\t\treturn () => {\n\t\t\tconsole.log(\"this is where the cleanup stuff happens\")\n\t\t}\n\t}, [context, grid, currentPiece])\n\n\tuseEffect(() => {\n\t\tconst handleKeyPress = ({ key }) => controls(key, currentPiece, grid, context)\n\t\tif (currentPiece) {\n\t\t\tdocument.addEventListener(\"keydown\", handleKeyPress)\n\t\t}\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"keydown\", handleKeyPress)\n\t\t}\n\t}, [currentPiece, grid, context])\n\n\tconst [seconds, setSeconds] = useState(0)\n\n\tuseEffect(() => {\n\t\tconst interval = setInterval(() => {\n\t\t\tsetSeconds((seconds) => seconds + 1)\n\t\t\tif (currentPiece)\n\t\t\t\tif (!currentPiece.moveDown()) {\n\t\t\t\t\tcurrentPiece.lock()\n\t\t\t\t\tsetCurrentPiece(newPiece(context, grid))\n\t\t\t\t\tsetSeconds(0)\n\t\t\t\t\tconsole.log(\"lock current piece and request for the next piece\")\n\t\t\t\t}\n\t\t}, 1000)\n\t\treturn () => clearInterval(interval)\n\t}, [currentPiece])\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\ttextAlign: \"center\",\n\t\t\t}}>\n\t\t\t<h3>{seconds} seconds since mount</h3>\n\t\t\t<canvas\n\t\t\t\tid=\"canvas\"\n\t\t\t\tref={canvasRef}\n\t\t\t\twidth={COLS * BLOCK}\n\t\t\t\theight={ROWS * BLOCK}\n\t\t\t\tstyle={{\n\t\t\t\t\tborder: \"2px solid #000\",\n\t\t\t\t\tmarginTop: 10,\n\t\t\t\t}}></canvas>\n\t\t</div>\n\t)\n}\n\nexport default GameCanvas\n","import React from \"react\";\nimport GameCanvas from \"./GameCanvas\";\n\nconst Game = (props) => {\n\treturn <GameCanvas />;\n};\n\nexport default Game;\n","import React from \"react\"\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\n\nimport Header from \"./components/Header\"\nimport Game from \"./components/Game\"\n\nimport \"./App.css\"\n// import Footer from \"./components/Footer\"\n\nfunction App(props) {\n\treturn (\n\t\t<>\n\t\t\t<CssBaseline>\n\t\t\t\t<Header />\n\t\t\t\t<Game />\n\t\t\t\t{/* <Footer /> */}\n\t\t\t</CssBaseline>\n\t\t</>\n\t)\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\nimport * as serviceWorker from \"./serviceWorker\"\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}